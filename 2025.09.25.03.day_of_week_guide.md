# CHUYÊN ĐỀ: TÌM THỨ TRONG TUẦN CHO MỘT NGÀY CỤ THỂ
## (Find Day of the Week for a Given Date)
### Dành cho học sinh lớp 10 Chuyên Tin

---

## 1. ĐỊNH NGHĨA VÀ BÀI TOÁN

### 1.1. Bài toán
Cho một ngày cụ thể (ngày, tháng, năm), hãy xác định ngày đó là thứ mấy trong tuần.

### 1.2. Quy ước kết quả
Hàm trả về giá trị từ 0 đến 6:
- **0**: Chủ Nhật (Sunday)
- **1**: Thứ Hai (Monday)
- **2**: Thứ Ba (Tuesday)
- **3**: Thứ Tư (Wednesday)
- **4**: Thứ Năm (Thursday)
- **5**: Thứ Sáu (Friday)
- **6**: Thứ Bảy (Saturday)

### 1.3. Minh họa bằng lịch

```
      Tháng 8 năm 2010
┌───┬───┬───┬───┬───┬───┬───┐
│ CN│ T2│ T3│ T4│ T5│ T6│ T7│
├───┼───┼───┼───┼───┼───┼───┤
│ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │ 7 │
│ 8 │ 9 │10 │11 │12 │13 │14 │
│15 │16 │17 │18 │19 │20 │21 │
│22 │23 │24 │25 │26 │27 │28 │
│29 │30*│31 │   │   │   │   │
└───┴───┴───┴───┴───┴───┴───┘
      ↑
   30/8/2010 = Thứ 2 (1)
```

## 2. CÁC VÍ DỤ MINH HỌA

### Ví dụ 1: 30/8/2010
- **Input**: d = 30, m = 8, y = 2010
- **Output**: 1 (Thứ Hai)
- **Giải thích**: Ngày 30 tháng 8 năm 2010 là thứ Hai

### Ví dụ 2: 15/6/1995
- **Input**: d = 15, m = 6, y = 1995  
- **Output**: 4 (Thứ Năm)
- **Giải thích**: Ngày 15 tháng 6 năm 1995 là thứ Năm

### Ví dụ 3: 29/2/2016
- **Input**: d = 29, m = 2, y = 2016
- **Output**: 1 (Thứ Hai)  
- **Giải thích**: Ngày 29 tháng 2 năm 2016 (năm nhuận) là thứ Hai

## 3. PHƯƠNG PHÁP 1: THUẬT TOÁN ZELLER'S CONGRUENCE

### 3.1. Ý tưởng thuật toán
Sử dụng công thức toán học dựa trên **Zeller's Congruence** - một thuật toán cổ điển để tính thứ trong tuần.

### 3.2. Công thức cốt lõi
```
dayOfWeek = (y + y/4 - y/100 + y/400 + t[m-1] + d) % 7
```

Trong đó:
- **d**: Ngày trong tháng
- **m**: Tháng (1-12)
- **y**: Năm (có điều chỉnh cho tháng 1,2)
- **t[]**: Mảng mã tháng định sẵn

### 3.3. Mảng mã tháng (Month Codes)

```
Tháng:  1  2  3  4  5  6  7  8  9 10 11 12
Mã:     0  3  2  5  0  3  5  1  4  6  2  4

┌─────────────────────────────────────────┐
│ Lý do có mã tháng:                      │
│ - Mỗi tháng có số ngày khác nhau        │
│ - Cần điều chỉnh để bù trừ sự chênh lệch│
│ - Tháng 1,2 được xem như tháng 13,14    │
│   của năm trước                         │
└─────────────────────────────────────────┘
```

### 3.4. Xử lý đặc biệt cho tháng 1 và 2

```
Nếu tháng < 3:
    năm = năm - 1
    
Ví dụ: 15/1/2020 → xem như 15/13/2019
       28/2/2021 → xem như 28/14/2020
```

### 3.5. Sơ đồ thuật toán

```
┌─────────────────┐
│   Bắt đầu       │
└─────┬───────────┘
      │
┌─────▼───────────┐
│ Nhập d, m, y    │
└─────┬───────────┘
      │
┌─────▼───────────┐
│   m < 3?        │
└─────┬───────────┘
      │ Yes
┌─────▼───────────┐
│   y = y - 1     │
└─────┬───────────┘
      │
┌─────▼───────────┐
│ Tính công thức: │
│ (y + y/4 - y/100│
│  + y/400 + t[m-1│
│  + d) % 7       │
└─────┬───────────┘
      │
┌─────▼───────────┐
│ Trả về kết quả  │
└─────┬───────────┘
      │
┌─────▼───────────┐
│   Kết thúc      │
└─────────────────┘
```

### 3.6. Code mẫu Zeller's Congruence

**C++:**
```cpp
#include <iostream>
#include <string>
using namespace std;

// Hàm tính thứ trong tuần theo Zeller's Congruence
int dayOfWeek(int d, int m, int y) {
    // Mảng mã tháng
    static int t[] = {0, 3, 2, 5, 0, 3, 5, 1, 4, 6, 2, 4};
    
    // Điều chỉnh năm cho tháng 1 và 2
    y -= m < 3;
    
    // Áp dụng công thức Zeller's Congruence
    return (y + y/4 - y/100 + y/400 + t[m-1] + d) % 7;
}

// Hàm chuyển số thành tên thứ
string getDayName(int dayCode) {
    string days[] = {"Chu Nhat", "Thu Hai", "Thu Ba", "Thu Tu", 
                     "Thu Nam", "Thu Sau", "Thu Bay"};
    return days[dayCode];
}

int main() {
    int day, month, year;
    
    cout << "Nhap ngay thang nam (dd mm yyyy): ";
    cin >> day >> month >> year;
    
    int result = dayOfWeek(day, month, year);
    
    cout << "Ngay " << day << "/" << month << "/" << year;
    cout << " la " << getDayName(result) << " (ma so: " << result << ")" << endl;
    
    // Test với các ví dụ mẫu
    cout << "\n=== KIEM TRA CAC VI DU MAU ===" << endl;
    cout << "30/8/2010: " << getDayName(dayOfWeek(30, 8, 2010)) << endl;
    cout << "15/6/1995: " << getDayName(dayOfWeek(15, 6, 1995)) << endl;
    cout << "29/2/2016: " << getDayName(dayOfWeek(29, 2, 2016)) << endl;
    
    return 0;
}
```

**Python:**
```python
def day_of_week(d, m, y):
    """
    Tính thứ trong tuần theo thuật toán Zeller's Congruence
    """
    # Mảng mã tháng
    t = [0, 3, 2, 5, 0, 3, 5, 1, 4, 6, 2, 4]
    
    # Điều chỉnh năm cho tháng 1 và 2
    if m < 3:
        y -= 1
    
    # Áp dụng công thức Zeller's Congruence
    return (y + y//4 - y//100 + y//400 + t[m-1] + d) % 7

def get_day_name(day_code):
    """Chuyển mã số thành tên thứ"""
    days = ["Chủ Nhật", "Thứ Hai", "Thứ Ba", "Thứ Tư", 
            "Thứ Năm", "Thứ Sáu", "Thứ Bảy"]
    return days[day_code]

def main():
    # Nhập dữ liệu
    print("Nhập ngày tháng năm:")
    day = int(input("Ngày: "))
    month = int(input("Tháng: "))
    year = int(input("Năm: "))
    
    # Tính toán
    result = day_of_week(day, month, year)
    
    # In kết quả
    print(f"Ngày {day}/{month}/{year} là {get_day_name(result)} (mã số: {result})")
    
    # Test với các ví dụ mẫu
    print("\n=== KIỂM TRA CÁC VÍ DỤ MẪU ===")
    test_cases = [
        (30, 8, 2010),
        (15, 6, 1995),
        (29, 2, 2016)
    ]
    
    for d, m, y in test_cases:
        result = day_of_week(d, m, y)
        print(f"{d}/{m}/{y}: {get_day_name(result)}")

if __name__ == "__main__":
    main()
```

## 4. PHƯƠNG PHÁP 2: THUẬT TOÁN DỰA TRÊN CÔNG THỨC

### 4.1. Ý tưởng
Sử dụng công thức đơn giản hóa với mã tháng và mã năm riêng biệt.

### 4.2. Các bước thực hiện

#### Bước 1: Tính mã tháng
```
Mã tháng cho từng tháng:
┌─────┬─────┬─────┬─────┬─────┬─────┐
│ T1  │ T2  │ T3  │ T4  │ T5  │ T6  │
│  6  │  2  │  2  │  5  │  0  │  3  │
├─────┼─────┼─────┼─────┼─────┼─────┤
│ T7  │ T8  │ T9  │ T10 │ T11 │ T12 │
│  5  │  1  │  4  │  6  │  2  │  4  │
└─────┴─────┴─────┴─────┴─────┴─────┘

Lưu ý: Tháng 2 năm nhuận có mã là 1
```

#### Bước 2: Tính mã năm
```
1. Lấy 2 chữ số cuối của năm
2. Nhân với 1.25 và làm tròn xuống
3. Chia lấy dư cho 7
4. Điều chỉnh theo thế kỷ
```

#### Bước 3: Điều chỉnh thế kỷ
```
Thế kỷ 1xx: +5
Thế kỷ 2xx: +3  
Thế kỷ 3xx: +1
Thế kỷ khác: tính theo công thức
```

### 4.3. Code mẫu phương pháp công thức

**C++:**
```cpp
#include <iostream>
#include <vector>
using namespace std;

class DateCalculator {
private:
    vector<int> monthCodes = {6, 2, 2, 5, 0, 3, 5, 1, 4, 6, 2, 4};
    vector<string> dayNames = {"Chu Nhat", "Thu Hai", "Thu Ba", "Thu Tu", 
                              "Thu Nam", "Thu Sau", "Thu Bay"};

public:
    int calculateDayOfWeek(int d, int m, int y) {
        // Điều chỉnh cho tháng 1 và 2
        if (m < 3) {
            y -= 1;
        }
        
        // Tính mã năm
        int yearCode = (y % 100) + (y % 100) / 4;
        
        // Điều chỉnh thế kỷ
        yearCode = (yearCode + (y / 100) / 4 + 5 * (y / 100)) % 7;
        
        // Tính kết quả cuối cùng
        return (d + monthCodes[m - 1] + yearCode) % 7;
    }
    
    void demonstrateCalculation(int d, int m, int y) {
        cout << "\n=== DEMO TINH TOAN CHO " << d << "/" << m << "/" << y << " ===" << endl;
        
        int originalY = y;
        if (m < 3) {
            y -= 1;
            cout << "Thang < 3, dieu chinh nam: " << originalY << " -> " << y << endl;
        }
        
        int yearCode = (y % 100) + (y % 100) / 4;
        cout << "Ma nam ban dau: (" << y << " % 100) + (" << y << " % 100) / 4 = " << yearCode << endl;
        
        yearCode = (yearCode + (y / 100) / 4 + 5 * (y / 100)) % 7;
        cout << "Ma nam sau dieu chinh the ky: " << yearCode << endl;
        
        cout << "Ma thang: " << monthCodes[m - 1] << endl;
        cout << "Ngay: " << d << endl;
        
        int result = (d + monthCodes[m - 1] + yearCode) % 7;
        cout << "Ket qua: (" << d << " + " << monthCodes[m - 1] << " + " << yearCode << ") % 7 = " << result << endl;
        cout << "=> " << dayNames[result] << endl;
    }
};

int main() {
    DateCalculator calc;
    
    // Demo tính toán chi tiết
    calc.demonstrateCalculation(15, 6, 1995);
    calc.demonstrateCalculation(30, 8, 2010);
    
    return 0;
}
```

**Python:**
```python
class DateCalculator:
    def __init__(self):
        self.month_codes = [6, 2, 2, 5, 0, 3, 5, 1, 4, 6, 2, 4]
        self.day_names = ["Chủ Nhật", "Thứ Hai", "Thứ Ba", "Thứ Tư", 
                         "Thứ Năm", "Thứ Sáu", "Thứ Bảy"]
    
    def calculate_day_of_week(self, d, m, y):
        """Tính thứ trong tuần theo phương pháp công thức"""
        # Điều chỉnh cho tháng 1 và 2
        if m < 3:
            y -= 1
        
        # Tính mã năm
        year_code = (y % 100) + (y % 100) // 4
        
        # Điều chỉnh thế kỷ
        year_code = (year_code + (y // 100) // 4 + 5 * (y // 100)) % 7
        
        # Tính kết quả cuối cùng
        return (d + self.month_codes[m - 1] + year_code) % 7
    
    def demonstrate_calculation(self, d, m, y):
        """Demo tính toán chi tiết"""
        print(f"\n=== DEMO TÍNH TOÁN CHO {d}/{m}/{y} ===")
        
        original_y = y
        if m < 3:
            y -= 1
            print(f"Tháng < 3, điều chỉnh năm: {original_y} -> {y}")
        
        year_code = (y % 100) + (y % 100) // 4
        print(f"Mã năm ban đầu: ({y} % 100) + ({y} % 100) // 4 = {year_code}")
        
        year_code = (year_code + (y // 100) // 4 + 5 * (y // 100)) % 7
        print(f"Mã năm sau điều chỉnh thế kỷ: {year_code}")
        
        print(f"Mã tháng: {self.month_codes[m - 1]}")
        print(f"Ngày: {d}")
        
        result = (d + self.month_codes[m - 1] + year_code) % 7
        print(f"Kết quả: ({d} + {self.month_codes[m - 1]} + {year_code}) % 7 = {result}")
        print(f"=> {self.day_names[result]}")

def main():
    calc = DateCalculator()
    
    # Demo tính toán chi tiết
    calc.demonstrate_calculation(15, 6, 1995)
    calc.demonstrate_calculation(30, 8, 2010)
    calc.demonstrate_calculation(29, 2, 2016)

if __name__ == "__main__":
    main()
```

## 5. XỬ LÝ CÁC TRƯỜNG HỢP ĐẶC BIỆT

### 5.1. Năm nhuận (Leap Year)

```cpp
bool isLeapYear(int year) {
    return (year % 4 == 0 && year % 100 != 0) || (year % 400 == 0);
}

// Kiểm tra ngày hợp lệ
bool isValidDate(int d, int m, int y) {
    if (m < 1 || m > 12) return false;
    
    int daysInMonth[] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    
    // Điều chỉnh cho tháng 2 năm nhuận
    if (m == 2 && isLeapYear(y)) {
        daysInMonth[1] = 29;
    }
    
    return d >= 1 && d <= daysInMonth[m-1];
}
```

### 5.2. Xử lý input không hợp lệ

**C++:**
```cpp
int safeDayOfWeek(int d, int m, int y) {
    if (!isValidDate(d, m, y)) {
        cout << "Ngay thang nam khong hop le!" << endl;
        return -1; // Mã lỗi
    }
    
    return dayOfWeek(d, m, y);
}
```

**Python:**
```python
def safe_day_of_week(d, m, y):
    if not is_valid_date(d, m, y):
        print("Ngày tháng năm không hợp lệ!")
        return -1  # Mã lỗi
    
    return day_of_week(d, m, y)
```

## 6. PHÂN TÍCH ĐỘ PHỨC TẠP

### 6.1. Độ phức tạp thời gian
- **Tất cả phương pháp**: O(1)
- Chỉ sử dụng các phép tính số học cơ bản

### 6.2. Độ phức tạp không gian  
- **Không gian phụ**: O(1)
- Chỉ sử dụng biến tạm và mảng hằng số

## 7. SO SÁNH CÁC PHƯƠNG PHÁP

| Phương pháp | Ưu điểm | Nhược điểm |
|------------|---------|-----------|
| **Zeller's Congruence** | Ngắn gọn, hiệu quả | Khó hiểu công thức |
| **Formula-based** | Dễ hiểu từng bước | Code dài hơn |

## 8. BÀI TẬP THỰC HÀNH

### Bài tập 1 (Cơ bản)
Viết chương trình nhập ngày/tháng/năm và xuất thứ trong tuần.

### Bài tập 2 (Nâng cao)
Tìm tất cả các ngày trong tháng có thứ cụ thể (ví dụ: tất cả thứ 6 trong tháng 10/2023).

### Bài tập 3 (Ứng dụng)
Tính khoảng cách (số ngày) giữa hai ngày bất kỳ.

### Bài tập 4 (Thử thách)  
Tạo lịch cho một tháng/năm cụ thể dưới dạng bảng.

### Bài tập 5 (Tư duy)
Tìm ngày gần nhất có thứ cụ thể (trước hoặc sau một ngày cho trước).

## 9. GỢI Ý GIẢI BÀI TẬP

### Bài tập 1:
```cpp
// Kiểm tra input hợp lệ trước khi tính toán
if (isValidDate(d, m, y)) {
    int result = dayOfWeek(d, m, y);
    cout << getDayName(result) << endl;
}
```

### Bài tập 2:
```python
def find_all_days_in_month(target_day, month, year):
    results = []
    days_in_month = get_days_in_month(month, year)
    
    for day in range(1, days_in_month + 1):
        if day_of_week(day, month, year) == target_day:
            results.append(day)
    
    return results
```

### Bài tập 4:
```cpp
void printCalendar(int month, int year) {
    int firstDay = dayOfWeek(1, month, year);
    int daysInMonth = getDaysInMonth(month, year);
    
    // In header
    cout << "CN  T2  T3  T4  T5  T6  T7" << endl;
    
    // In khoảng trống đầu tháng
    for (int i = 0; i < firstDay; i++) {
        cout << "    ";
    }
    
    // In các ngày
    for (int day = 1; day <= daysInMonth; day++) {
        printf("%2d  ", day);
        if ((day + firstDay) % 7 == 0) {
            cout << endl;
        }
    }
}
```

## 10. ỨNG DỤNG THỰC TẾ

### 10.1. Các ứng dụng
- **Hệ thống lịch**: Tạo lịch, báo cáo
- **Quản lý sự kiện**: Lên lịch họp, sự kiện
- **Tính lương**: Tính ngày công, ngày lễ
- **Đặt lịch hẹn**: Hệ thống booking, reservation

### 10.2. Mở rộng
- Tính toán ngày lễ, tết
- Tìm ngày làm việc tiếp theo
- Tính tuổi chính xác
- Lập kế hoạch dự án theo ngày

---
